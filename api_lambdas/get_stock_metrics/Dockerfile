FROM public.ecr.aws/lambda/python:3.10
COPY . ${LAMBDA_TASK_ROOT}

ARG DB_CONNECTION_STRING
ENV DB_CONNECTION_STRING=$DB_CONNECTION_STRING
ARG DB_NAME
ENV DB_NAME=$DB_NAME
ARG STOCK_METRICS_COLLECTION_NAME
ENV STOCK_METRICS_COLLECTION_NAME=$STOCK_METRICS_COLLECTION_NAME

RUN pip install pymongo==4.4.1 pandas==2.0.1 --target "${LAMBDA_TASK_ROOT}"
CMD [ "lambda_function.lambda_handler" ]`
